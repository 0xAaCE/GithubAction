name: 'Publish package into NPM registry'

on:
  workflow_dispatch:
  push:
    branches:
      - main

jobs:
  check run:
    env:
      github: ${{ github }}
      githubEvent: ${{ github.event }}
      githubEventName: ${{ github.event_name }}
      githubEventPath: ${{ github.event_path }}
    run: |
      echo "github: $github"
      echo "githubEvent: $githubEvent"
      echo "githubEventName: $githubEventName"
      echo "githubEventPath: $githubEventPath"

  deploy sites:
    uses: ./.github/workflows/package.yml
    with:
      package: sites-graphql
    secrets:
      token: este es mi doppler token dev
  deploy authorizer:
    uses: ./.github/workflows/package.yml
    with:
      package: authorizer
    secrets:
      token: este es mi doppler token dev